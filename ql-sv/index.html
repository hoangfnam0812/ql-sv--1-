<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÄÄƒng nháº­p - Há»‡ thá»‘ng Quáº£n lÃ½ Sinh viÃªn</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <div class="auth-container">
        <div class="auth-box">
            <h2>ğŸ“ ÄÄƒng Nháº­p</h2>
            <p>Há»‡ thá»‘ng Quáº£n lÃ½ Sinh viÃªn</p>
            
            <div id="alertMessage" class="alert"></div>

            <form id="loginForm">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        placeholder="Nháº­p email cá»§a báº¡n"
                        required
                        autocomplete="email"
                    >
                </div>

                <div class="form-group">
                    <label for="password">Máº­t kháº©u</label>
                    <input 
                        type="password" 
                        id="password" 
                        name="password" 
                        placeholder="Nháº­p máº­t kháº©u"
                        required
                        autocomplete="current-password"
                    >
                </div>

                <button type="submit" class="btn btn-primary">
                    ÄÄƒng nháº­p
                </button>
            </form>

            <div class="auth-link">
                ChÆ°a cÃ³ tÃ i khoáº£n? <a href="./pages/register.html">ÄÄƒng kÃ½ ngay</a>
            </div>

            <div class="auth-link mt-2" style="padding-top: 20px; border-top: 1px solid #e3e6f0;">
                <small style="color: #858796;">
                    <strong>TÃ i khoáº£n máº«u:</strong><br>
                    Admin: admin@qlsv.com / admin123
                </small>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="./js/storage.js"></script>
    <script src="./js/auth.js"></script>
    <script src="./js/validation.js"></script>
    <script src="./js/utils.js"></script>
    <script>
        // Kiá»ƒm tra náº¿u Ä‘Ã£ Ä‘Äƒng nháº­p thÃ¬ chuyá»ƒn Ä‘áº¿n dashboard
        if (Auth.isAuthenticated()) {
            window.location.href = './pages/dashboard.html';
        }

        // Xá»­ lÃ½ form Ä‘Äƒng nháº­p
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;

            // Validate
            const validation = Validation.validateLoginForm(email, password);
            if (!validation.isValid) {
                Utils.showAlert(validation.errors.join('<br>'), 'error');
                return;
            }

            // ÄÄƒng nháº­p
            const result = Auth.login(email, password);
            
            if (result.success) {
                Utils.showAlert(result.message, 'success');
                setTimeout(() => {
                    window.location.href = './pages/dashboard.html';
                }, 1000);
            } else {
                Utils.showAlert(result.message, 'error');
            }
        });

        // Tá»± Ä‘á»™ng focus vÃ o email
        document.getElementById('email').focus();
    </script>
</body>
</html>
